diff --git a/src/controllers/progresoController.js b/src/controllers/progresoController.js
index 41ba9bd9b264c8cb6371d1d4cb8ffd0abd7c3917..10d88b1d2e26c79ddde120543c783712a3601980 100644
--- a/src/controllers/progresoController.js
+++ b/src/controllers/progresoController.js
@@ -26,95 +26,121 @@ const updatePhaseStatus = async (progreso) => {
     logger.info(`âœ… Fase "${progreso.fase.nombre}" marcada como COMPLETADA para ${progreso.residente.email}`);
   }
 
   const ModeloFase = mongoose.model(progreso.faseModel || 'Fase');
   const nextFase = await ModeloFase.findOne({ orden: progreso.fase.orden + 1 });
   if (!nextFase) {
     logger.info(`ðŸŽ‰ No hay mÃ¡s fases despuÃ©s de "${progreso.fase.nombre}". Fin del plan formativo para ${progreso.residente.email}`);
     return;
   }
 
   const nextProgreso = await ProgresoResidente.findOne({
     residente: progreso.residente._id,
     fase: nextFase._id
   });
 
   if (nextProgreso && nextProgreso.estadoGeneral === 'bloqueada') {
     nextProgreso.estadoGeneral = 'en progreso';
     await nextProgreso.save();
     logger.info(`ðŸš€ Fase "${nextFase.nombre}" DESBLOQUEADA para ${progreso.residente.email}`);
   } else {
     logger.info(`â„¹ï¸ Fase "${nextFase.nombre}" ya estaba desbloqueada o no encontrada`);
   }
 };
 
 
+const buildActividadDisplayData = (actividad = {}) => {
+  const actividadMaestra =
+    actividad.actividad && typeof actividad.actividad === 'object'
+      ? actividad.actividad
+      : null;
+
+  return {
+    nombre: actividadMaestra?.nombre || actividad.nombre,
+    descripcion:
+      actividadMaestra?.descripcion !== undefined
+        ? actividadMaestra.descripcion
+        : actividad.descripcion,
+    tipo: actividadMaestra?.tipo || actividad.tipo,
+    requiereAdjunto:
+      actividadMaestra?.requiereAdjunto !== undefined
+        ? actividadMaestra.requiereAdjunto
+        : actividad.requiereAdjunto,
+    actividadModel:
+      actividadMaestra?.constructor?.modelName || actividad.actividadModel,
+    actividadId: actividadMaestra?._id || actividad.actividad
+  };
+};
 
-
-const formatProgresoParaResidente = (progresoDoc) => {
+
+const formatProgresoParaResidente = (progresoDoc) => {
   const plain = progresoDoc.toObject ? progresoDoc.toObject({ virtuals: true }) : progresoDoc;
   const adjuntosPorIndice = (plain.adjuntos || []).reduce((acc, adj) => {
     if (typeof adj.actividadIndex !== 'number') return acc;
     const key = adj.actividadIndex;
     if (!acc[key]) acc[key] = [];
     acc[key].push({
       _id: adj._id.toString(),
       nombreArchivo: adj.nombreArchivo,
       mimeType: adj.mimeType,
       fechaSubida: adj.fechaSubida
     });
     return acc;
   }, {});
 
   return {
     _id: plain._id.toString(),
     fase: plain.fase,
     faseModel: plain.faseModel,
     estadoGeneral: plain.estadoGeneral,
-    actividades: (plain.actividades || []).map((act, index) => ({
-      nombre: act.nombre,
-      tipo: act.tipo,
-      completada: act.estado === 'validado',
-      comentariosResidente: act.comentariosResidente || '',
-      comentariosTutor: act.comentariosTutor || '',
-      fecha: act.fechaRealizacion,
-      fechaValidacion: act.fechaValidacion,
-      comentariosRechazo: act.comentariosRechazo || '',
-      fechaRechazo: act.fechaRechazo,
-      estado: act.estado,
-      porcentajeParticipacion: act.porcentajeParticipacion,
-      cirugia: act.cirugia,
-      otraCirugia: act.otraCirugia,
-      nombreCirujano: act.nombreCirujano,
-      adjuntos: adjuntosPorIndice[index] || [],
-      requiereAdjunto: Boolean(
-        (act.actividad && act.actividad.requiereAdjunto) ||
-          act.requiereAdjunto
-      )
-    }))
-  };
-};
+    actividades: (plain.actividades || []).map((act, index) => {
+      const actividadData = buildActividadDisplayData(act);
+
+      return {
+        nombre: actividadData.nombre,
+        descripcion: actividadData.descripcion,
+        tipo: actividadData.tipo,
+        actividad: actividadData.actividadId,
+        actividadModel: actividadData.actividadModel,
+        completada: act.estado === 'validado',
+        comentariosResidente: act.comentariosResidente || '',
+        comentariosTutor: act.comentariosTutor || '',
+        fecha: act.fechaRealizacion,
+        fechaValidacion: act.fechaValidacion,
+        comentariosRechazo: act.comentariosRechazo || '',
+        fechaRechazo: act.fechaRechazo,
+        estado: act.estado,
+        porcentajeParticipacion: act.porcentajeParticipacion,
+        cirugia: act.cirugia,
+        otraCirugia: act.otraCirugia,
+        nombreCirujano: act.nombreCirujano,
+        adjuntos: adjuntosPorIndice[index] || [],
+        requiereAdjunto: Boolean(actividadData.requiereAdjunto)
+      };
+    })
+  };
+};
 
 
 const inicializarProgresoFormativo = async (req, res, next) => {
   try {
   const user = await User.findById(req.params.id);
   if (!user || (user.rol !== 'residente' && user.rol !== 'participante')) {
     return res.status(404).json({ success: false, error: 'Residente no vÃ¡lido' });
   }
 
      if (req.body.tipo) user.tipo = req.body.tipo;
     const count = await inicializarProgresoFormativoDB(user);
     res.status(200).json({ success: true, count });
   } catch (err) {
     next(err);
   }
 };
 
 
 
 
 
 // @desc    Obtener todos los registros de progreso
 // @route   GET /api/progreso
 // @access  Private/Admin
 const getAllProgreso = async (req, res, next) => {
@@ -244,58 +270,68 @@ const getProgresoResidentePorFase = async (req, res, next) => {
     const progreso = await ProgresoResidente.find({ residente: req.params.id })
       .populate('fase')
       .populate('actividades.actividad')
       .populate('actividades.cirugia');
 
     await ProgresoResidente.populate(progreso, {
       path: 'adjuntos',
       select: 'nombreArchivo mimeType fechaSubida actividadIndex'
     });
 
     const resultado = progreso.map(item => {
       const plain = item.toObject({ virtuals: true });
       const adjuntosPorIndice = (plain.adjuntos || []).reduce((acc, adj) => {
         if (typeof adj.actividadIndex !== 'number') return acc;
         const key = adj.actividadIndex;
         if (!acc[key]) acc[key] = [];
         acc[key].push({
           _id: adj._id.toString(),
           nombreArchivo: adj.nombreArchivo,
           mimeType: adj.mimeType,
           fechaSubida: adj.fechaSubida
         });
         return acc;
       }, {});
 
-      return {
-        ...plain,
-        actividades: plain.actividades.map((act, index) => ({
-          ...act,
-          adjuntos: adjuntosPorIndice[index] || []
-        }))
-      };
-    });
+      return {
+        ...plain,
+        actividades: plain.actividades.map((act, index) => {
+          const actividadData = buildActividadDisplayData(act);
+
+          return {
+            ...act,
+            nombre: actividadData.nombre,
+            descripcion: actividadData.descripcion,
+            tipo: actividadData.tipo,
+            actividadModel: actividadData.actividadModel,
+            actividad: actividadData.actividadId,
+            requiereAdjunto: Boolean(actividadData.requiereAdjunto),
+            adjuntos: adjuntosPorIndice[index] || []
+          };
+        })
+      };
+    });
 
     const filtered = resultado.filter(p => p.residente);
 
     res.status(200).json({
       success: true,
       count: filtered.length,
       data: filtered
     });
   } catch (err) {
     next(err);
   }
 };
 
 
 // @desc    Registrar nuevo progreso
 // @route   POST /api/progreso
 // @access  Private
 
 
 
 
 const registrarProgreso = async (req, res, next) => {
   try {
     // Si el usuario es residente, solo puede registrar su propio progreso
   if ((req.user.rol === 'residente' || req.user.rol === 'participante') && req.body.residente !== req.user.id) {
